<div class="admin-container">
    <div class="admin-box">
        <h2>PENDING PLAYERS</h2>
        <div id="playerList"></div>
    </div>

    <div class="admin-box">
        <h2>JS CODE FOR INDEX.JS</h2>
        <p style="font-size: 12px; color: #8a9199;">Copy this block and paste it into your index.js file:</p>
        <textarea id="codeBox" readonly></textarea>
        <button onclick="clearAll()" class="clear-btn">CLEAR LIST</button>
    </div>
</div>

<style>
    body { background: #0a1118; color: white; font-family: sans-serif; padding: 40px; }
    .admin-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .admin-box { background: #141d26; padding: 20px; border-radius: 8px; border: 1px solid #1c2732; }
    h2 { font-size: 1rem; color: #ff1e1e; margin-bottom: 15px; }
    table { width: 100%; border-collapse: collapse; font-size: 13px; }
    th { text-align: left; color: #8a9199; padding-bottom: 10px; }
    td { padding: 8px 0; border-bottom: 1px solid #1c2732; }
    textarea { width: 100%; height: 200px; background: #000; color: #00ff88; padding: 10px; font-family: monospace; border: none; margin-top: 10px; }
    .clear-btn { background: #ff1e1e; color: white; border: none; padding: 10px 20px; margin-top: 15px; cursor: pointer; border-radius: 4px; }
</style>

<script>
    function renderAdmin() {
        const players = JSON.parse(localStorage.getItem('bowen_players')) || [];
        const listDiv = document.getElementById('playerList');
        const codeBox = document.getElementById('codeBox');

        if (players.length === 0) {
            listDiv.innerHTML = "No registrations yet.";
            codeBox.value = "";
            return;
        }

        let table = `<table><tr><th>NAME</th><th>DEPT</th><th>POS</th></tr>`;
        let code = `// --- PASTE THIS IN INDEX.JS --- \n\n`;

        const posMap = { 'GK': 'KEEPERS', 'DEF': 'DEFENDERS', 'MID': 'MIDFIELDERS', 'ST': 'STRIKERS' };

        players.forEach(p => {
            table += `<tr><td>${p.name}</td><td>${p.dept}</td><td>${p.pos}</td></tr>`;
            const cat = posMap[p.pos] || 'STRIKERS';
            code += `addNewPlayer("${p.name}", 0, 0, 0, 0, "${p.dept}", "${cat}");\n`;
        });

        table += `</table>`;
        listDiv.innerHTML = table;
        codeBox.value = code;
    }

    function clearAll() {
        if(confirm("Wipe registration list?")) {
            localStorage.removeItem('bowen_players');
            renderAdmin();
        }
    }

    window.onload = renderAdmin;
</script>